<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Using mplush5 • mplush5</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Using mplush5">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">mplush5</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/mplush5.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/dougtommet/mplush5/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Using mplush5</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/dougtommet/mplush5/blob/main/vignettes/mplush5.Rmd" class="external-link"><code>vignettes/mplush5.Rmd</code></a></small>
      <div class="d-none name"><code>mplush5.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dougtommet/mplush5" class="external-link">mplush5</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="how-to-use-mplush5">How to use mplush5<a class="anchor" aria-label="anchor" href="#how-to-use-mplush5"></a>
</h2>
<p>This is a guide on how to use the mplush5 library.</p>
<div class="section level3">
<h3 id="what-is-an-h5-file">What is an h5 file?<a class="anchor" aria-label="anchor" href="#what-is-an-h5-file"></a>
</h3>
<p>An h5/hdf5 file is a type of file that is used to store large amounts
of data. The data are stored in a hierarchical data format. Mplus uses
this format to save the numeric results of the model to an external
file.</p>
</div>
<div class="section level3">
<h3 id="why-do-we-need-these-functions">Why do we need these functions?<a class="anchor" aria-label="anchor" href="#why-do-we-need-these-functions"></a>
</h3>
<p>It is possible to read an h5 file directly into R. However, these
files are large and difficult to navigate. Also, the structure of the h5
file changes by the modeling options used in Mplus. Because of this, it
is difficult to find the desired results.</p>
<p>Below is an example of an h5 file.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex3_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ex3_1.h5"</span>, package <span class="op">=</span> <span class="st">"mplush5"</span><span class="op">)</span></span>
<span><span class="va">raw_h5</span> <span class="op">&lt;-</span> <span class="fu">rhdf5</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rhdf5/man/h5_dump.html" class="external-link">h5dump</a></span><span class="op">(</span><span class="va">ex3_1</span>, load<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">raw_h5</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 8</span></span>
<span><span class="co">#&gt;  $ Confidence Intervals of Model Results             :List of 2</span></span>
<span><span class="co">#&gt;   ..$ Results   : num [1:4, 1:7] 0.863 0.535 0.399 0.788 0.888 ...</span></span>
<span><span class="co">#&gt;   ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ Confidence Intervals of Standardized Model Results:List of 3</span></span>
<span><span class="co">#&gt;   ..$ STD Standardization  :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ Results   : num [1:4, 1:7] 0.863 0.535 0.399 0.788 0.888 ...</span></span>
<span><span class="co">#&gt;   .. ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;   ..$ STDY Standardization :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ Results   : num [1:4, 1:7] 0.567 0.349 0.253 0.321 0.581 ...</span></span>
<span><span class="co">#&gt;   .. ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;   ..$ STDYX Standardization:List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ Results   : num [1:4, 1:7] 0.591 0.337 0.253 0.321 0.606 ...</span></span>
<span><span class="co">#&gt;   .. ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ Input instructions                                : chr [1:17(1d)] "TITLE:                                                                                                         "| __truncated__ "this is an example of a simple linear                                                                          "| __truncated__ "  regression for a continuous observed                                                                         "| __truncated__ "  dependent variable with two covariates                                                                       "| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ Model Fit Information                             :List of 2</span></span>
<span><span class="co">#&gt;   ..$ Description: chr [1:19(1d)] "Number of Free Parameters                                                                                      "| __truncated__ "H0 Loglikelihood                                                                                               "| __truncated__ "H1 Loglikelihood                                                                                               "| __truncated__ "Akaike (AIC)                                                                                                   "| __truncated__ ...</span></span>
<span><span class="co">#&gt;   ..$ Value      : num [1:19(1d)] 4 -694 -694 1397 1414 ...</span></span>
<span><span class="co">#&gt;  $ Model Results                                     :List of 2</span></span>
<span><span class="co">#&gt;   ..$ Results   : num [1:4, 1:4] 0.9695 0.649 0.511 0.9413 0.0415 ...</span></span>
<span><span class="co">#&gt;   ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ R-Square                                          :List of 2</span></span>
<span><span class="co">#&gt;   ..$ Results   : num [1, 1:4] 0.609 0.0273 22.3164 0</span></span>
<span><span class="co">#&gt;   ..$ Statements: chr [1, 1:4] "Observed Variable                                                                                              "| __truncated__ "Y1                                                                                                             "| __truncated__ "                                                                                                               "| __truncated__ "Y1                                                                                                             "| __truncated__</span></span>
<span><span class="co">#&gt;  $ Standardized Model Results                        :List of 3</span></span>
<span><span class="co">#&gt;   ..$ STD Standardization  :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ Results   : num [1:4, 1:4] 0.9695 0.649 0.511 0.9413 0.0415 ...</span></span>
<span><span class="co">#&gt;   .. ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;   ..$ STDY Standardization :List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ Results   : num [1:4, 1:4] 0.6248 0.4183 0.3293 0.391 0.0223 ...</span></span>
<span><span class="co">#&gt;   .. ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;   ..$ STDYX Standardization:List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ Results   : num [1:4, 1:4] 0.6534 0.4092 0.3293 0.391 0.0243 ...</span></span>
<span><span class="co">#&gt;   .. ..$ Statements: chr [1:4, 1:4] "                                                                                                               "| __truncated__ "                                                                                                               "| __truncated__ "Intercepts                                                                                                     "| __truncated__ "Residual Variances                                                                                             "| __truncated__ ...</span></span>
<span><span class="co">#&gt;  $ Summary of Analysis                               :List of 4</span></span>
<span><span class="co">#&gt;   ..$ Input data file(s)            :List of 1</span></span>
<span><span class="co">#&gt;   .. ..$ Data files: chr [1(1d)] "ex3_1_aa78f01013fe7acb644cf7c3710aa050.dat                                                                     "| __truncated__</span></span>
<span><span class="co">#&gt;   ..$ Number of observations        : int [1(1d)] 500</span></span>
<span><span class="co">#&gt;   ..$ Observed dependent variables  :List of 1</span></span>
<span><span class="co">#&gt;   .. ..$ Continuous: chr [1(1d)] "Y1                                                                                                             "| __truncated__</span></span>
<span><span class="co">#&gt;   ..$ Observed independent variables:List of 1</span></span>
<span><span class="co">#&gt;   .. ..$ Observed independent variables: chr [1:2(1d)] "X1                                                                                                             "| __truncated__ "X3                                                                                                             "| __truncated__</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="saving-an-h5-file">Saving an h5 file<a class="anchor" aria-label="anchor" href="#saving-an-h5-file"></a>
</h3>
<p>Before using any functions in this package, you need to have an h5
file available. This code shows how to use MplusAutomation to run a
Mplus model. Note in the savedata option, “H5RESULTS” is used to specify
the h5 file.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu">MplusAutomation</span><span class="fu">::</span><span class="fu"><a href="https://michaelhallquist.github.io/MplusAutomation/reference/mplusObject.html" class="external-link">mplusObject</a></span><span class="op">(</span></span>
<span>  TITLE <span class="op">=</span> <span class="st">"this is an example of a simple linear</span></span>
<span><span class="st">  regression for a continuous observed</span></span>
<span><span class="st">  dependent variable with two covariates"</span>,</span>
<span>  MODEL <span class="op">=</span> <span class="st">"y1 ON x1 x3;"</span>,</span>
<span>  OUTPUT <span class="op">=</span> <span class="st">"standardized; cinterval;"</span>,</span>
<span>  SAVEDATA <span class="op">=</span> <span class="st">"H5RESULTS = ex3_1.h5;"</span>,</span>
<span>  rdata <span class="op">=</span> <span class="va">ex3_1_df</span></span>
<span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">MplusAutomation</span><span class="fu">::</span><span class="fu"><a href="https://michaelhallquist.github.io/MplusAutomation/reference/mplusModeler.html" class="external-link">mplusModeler</a></span><span class="op">(</span><span class="va">mod</span>, modelout <span class="op">=</span> <span class="st">"ex3_1.inp"</span>, run <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="first-step">First step<a class="anchor" aria-label="anchor" href="#first-step"></a>
</h3>
<p>The first function to use is <code><a href="../reference/mplus.view.results.html">mplus.view.results()</a></code>. This
function lists what is available in the h5 function. Mplus writes
different pieces of information to the h5 file depending on the type of
model and options specified, so not all of the functions in this package
can be used on every h5 file.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex3_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ex3_1.h5"</span>, package <span class="op">=</span> <span class="st">"mplush5"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/mplus.view.results.html">mplus.view.results</a></span><span class="op">(</span><span class="va">ex3_1</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Use the following functions to view the available results.</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  - Input instructions</span></span>
<span><span class="co">#&gt;   - mplus.print.input.instructions</span></span>
<span><span class="co">#&gt;  - Summary of Analysis</span></span>
<span><span class="co">#&gt;   - mplus.print.summary.analysis</span></span>
<span><span class="co">#&gt;  - Model Fit Information</span></span>
<span><span class="co">#&gt;   - mplus.print.model.fit.information</span></span>
<span><span class="co">#&gt;  - Model Results</span></span>
<span><span class="co">#&gt;   - mplus.print.model.results</span></span>
<span><span class="co">#&gt;  - Confidence Intervals of Model Results</span></span>
<span><span class="co">#&gt;   - mplus.print.confidence.intervals</span></span>
<span><span class="co">#&gt;  - Standardized Model Results</span></span>
<span><span class="co">#&gt;   - mplus.print.standardized.model.results</span></span>
<span><span class="co">#&gt;  - Confidence Intervals of Standardized Model Results</span></span>
<span><span class="co">#&gt;   - mplus.print.standardized.confidence.intervals</span></span>
<span><span class="co">#&gt;  - R-Square</span></span>
<span><span class="co">#&gt;   - mplus.print.rsquare</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="subsequent-steps">Subsequent steps<a class="anchor" aria-label="anchor" href="#subsequent-steps"></a>
</h3>
<p>The <code><a href="../reference/mplus.view.results.html">mplus.view.results()</a></code> function above shows that for
this h5 file, the following functions can be used:</p>
<ul>
<li><p><code><a href="../reference/mplus.print.input.instructions.html">mplus.print.input.instructions()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.summary.analysis.html">mplus.print.summary.analysis()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.model.fit.information.html">mplus.print.model.fit.information()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.model.results.html">mplus.print.model.results()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.confidence.intervals.html">mplus.print.confidence.intervals()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.standardized.model.results.html">mplus.print.standardized.model.results()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.standardized.confidence.intervals.html">mplus.print.standardized.confidence.intervals()</a></code></p></li>
<li><p><code><a href="../reference/mplus.print.rsquare.html">mplus.print.rsquare()</a></code></p></li>
</ul>
<p>To use any of these functions just specify the path to the h5 file.
The following code shows how to use the
<code><a href="../reference/mplus.print.model.results.html">mplus.print.model.results()</a></code> function to get the model
results.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex3_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ex3_1.h5"</span>, package <span class="op">=</span> <span class="st">"mplush5"</span><span class="op">)</span></span>
<span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/mplus.print.model.results.html">mplus.print.model.results</a></span><span class="op">(</span><span class="va">ex3_1</span><span class="op">)</span></span>
<span><span class="va">results</span></span>
<span><span class="co">#&gt;              Section Statement  Estimate       S.E. Estimate/S.E.</span></span>
<span><span class="co">#&gt; 1                     Y1 ON X1 0.9694732 0.04150770      23.35646</span></span>
<span><span class="co">#&gt; 2                     Y1 ON X3 0.6490355 0.04437483      14.62621</span></span>
<span><span class="co">#&gt; 3         Intercepts        Y1 0.5109621 0.04342922      11.76540</span></span>
<span><span class="co">#&gt; 4 Residual Variances        Y1 0.9412942 0.05953521      15.81072</span></span>
<span><span class="co">#&gt;   Two-Tailed P-Value</span></span>
<span><span class="co">#&gt; 1                  0</span></span>
<span><span class="co">#&gt; 2                  0</span></span>
<span><span class="co">#&gt; 3                  0</span></span>
<span><span class="co">#&gt; 4                  0</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="other-approaches">Other approaches<a class="anchor" aria-label="anchor" href="#other-approaches"></a>
</h3>
<p>The h5 file is not the only way to access results from Mplus. The
MplusAutomation package has a function <code>readModels()</code> that
reads and parses the Mplus output file. The following code shows how to
get the same information using <code>readModels()</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ex3_1.out</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"ex3_1.out"</span>, package <span class="op">=</span> <span class="st">"mplush5"</span><span class="op">)</span></span>
<span><span class="va">ex3_1_output</span> <span class="op">&lt;-</span> <span class="fu">MplusAutomation</span><span class="fu">::</span><span class="fu"><a href="https://michaelhallquist.github.io/MplusAutomation/reference/readModels.html" class="external-link">readModels</a></span><span class="op">(</span><span class="va">ex3_1.out</span><span class="op">)</span></span>
<span><span class="va">ex3_1_output</span><span class="op">[[</span><span class="st">"parameters"</span><span class="op">]</span><span class="op">]</span><span class="op">[[</span><span class="st">"unstandardized"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt;          paramHeader param   est    se est_se pval</span></span>
<span><span class="co">#&gt; 1              Y1.ON    X1 0.969 0.042 23.356    0</span></span>
<span><span class="co">#&gt; 2              Y1.ON    X3 0.649 0.044 14.626    0</span></span>
<span><span class="co">#&gt; 3         Intercepts    Y1 0.511 0.043 11.765    0</span></span>
<span><span class="co">#&gt; 4 Residual.Variances    Y1 0.941 0.060 15.811    0</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Douglas Tommet.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
